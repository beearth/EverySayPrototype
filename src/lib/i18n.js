// Internationalization (i18n) support
const translations = {
  en: {
    tutorial: {
      step1: {
        title: "Welcome to SPACE STACK! ğŸ‘‹",
        content: {
          0: "SPACE STACK transforms positive energy from Faith, Fandom, and Support into digital assets.",
          1: "We digitize every 'Positive Choice' you make in real-time as a Stack.",
          2: "Accumulated Stacks become powerful social proof for viral growth.",
        },
      },
      step2: {
        title: "Understanding WorldStack ğŸ—¼",
        content: {
          0: "WorldStack gathers all your positive expressions:",
          1: "Voice, Word Study, Positive Choices, and Drawings.",
          2: "These four types of 'Stacks' come together",
          3: "to build a tower that transforms the world.",
        },
      },
      step3: {
        title: "Using Cheer Feature ğŸ’—",
        content: {
          0: "section, select a person or event you want to support.",
          1: "button to record a voice message.",
        },
      },
      step4: {
        title: "Recording Your Voice ğŸ™ï¸",
        content: {
          0: "Grant microphone permission to record your voice.",
          1: "Recorded voices are added to WorldStack and",
          2: "delivered as messages of encouragement to others.",
          3: "ğŸ’¡ Tip: Short and heartfelt messages are most effective!",
        },
      },
      step5: {
        title: "Positive Choice Quiz âœ¨",
        content: {
          0: "button at the top to start a quiz that helps you practice positive choices.",
          1: "Select the positive answer in multiple-choice questions,",
          2: "without voice recording",
          3: "and it will be added to WorldStack.",
          4: "ğŸ’¡ An alternative feature for those who find voice recording difficult!",
        },
      },
      step6: {
        title: "Word Study Mode ğŸ“š",
        highlight: "Stack Positive Words",
        content: {
          0: "by dragging down!",
          1: "Memorize words by changing their colors,",
          2: "and stack positive words directly to WorldStack.",
          3: "ğŸ’¡ Grow your vocabulary starting with positive words!",
        },
      },
      step7: {
        title: "Positive Drawing Mode ğŸ¨",
        highlight: "Draw Your Heart",
        content: {
          0: "Select a positive word like Love, Hope, Peace,",
          1: "and express it with your own drawing.",
          2: "Your creation becomes a unique stack",
          3: "that adds color to the WorldStack tower.",
        },
      },
      skip: "Skip",
      previous: "Previous",
      next: "Next",
      start: "Get Started",
      dontShowAgain: "Don't show again",
    },
    positiveChoice: {
      title: "Positive Choice Quiz âœ¨",
      close: "Close",
      selectPositive: "Select the positive choice",
      correct: "ğŸ‰ Correct!",
      incorrect: "âŒ Incorrect",
      correctAnswer: "The correct answer is",
      adding: "Adding to WorldStack...",
      added: "Added to WorldStack!",
      retry: "Try Again",
      error: "Save error",
      scriptPrefix: "Positive Choice:",
    },
    common: {
      loading: "Loading...",
      error: "Error",
    },
    main: {
      title: "SPACE STACK Cheer Hub",
      searchPlaceholder: "Search events",
      whoToCheer: "Who to Cheer",
      cheerNow: "Cheer Now",
      worldStack: "WorldStack",
      voicesBuilding: "Voices building together",
      startBuilding: "Start building the tower...",
      myStackLocal: "My Stack (Local)",
      refresh: "Refresh",
      categories: {
        fandom: "Fandom",
        health: "Health",
        education: "Education",
        local: "Local",
        sports: "Sports",
        nonProfit: "Non-profit",
        children: "Children",
        emergingCreators: "Emerging Creators",
      },
    },
  },
  ko: {
    tutorial: {
      step1: {
        title: "SPACE STACKì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤! ğŸ‘‹",
        content: {
          0: "SPACE STACKëŠ” ì‹ ì•™, íŒ¬ë¤, í›„ì›ì˜ ê¸ì • ì—ë„ˆì§€ë¥¼ ë””ì§€í„¸ ìì‚°(Stack)ìœ¼ë¡œ ì „í™˜í•©ë‹ˆë‹¤.",
          1: "ë‹¹ì‹ ì˜ ëª¨ë“  'ê¸ì •ì  ì„ íƒ'ì€ ì‹¤ì‹œê°„ìœ¼ë¡œ ê¸°ë¡ë˜ì–´ ìŠ¤íƒì´ ë©ë‹ˆë‹¤.",
          2: "ì¶•ì ëœ ìŠ¤íƒì€ ê°•ë ¥í•œ ì‚¬íšŒì  ì¦ê±°ê°€ ë˜ì–´ ì„¸ìƒì„ ë³€í™”ì‹œí‚µë‹ˆë‹¤.",
        },
      },
      step2: {
        title: "WorldStack ì•Œì•„ë³´ê¸° ğŸ—¼",
        content: {
          0: "WorldStackì€ ìŒì„± ë…¹ìŒ, ê¸ì • ë‹¨ì–´ í•™ìŠµ,",
          1: "ê¸ì • ì„ íƒ, ê·¸ë¦¬ê³  ë“œë¡œì‰ê¹Œì§€ ëª¨ë“  í‘œí˜„ì„ ë‹´ìŠµë‹ˆë‹¤.",
          2: "ì´ 4ê°€ì§€ ë°©ì‹ì˜ ìŠ¤íƒë“¤ì´ í•˜ë‚˜ë¡œ ëª¨ì—¬,",
          3: "ì„¸ìƒì„ ë”°ëœ»í•˜ê²Œ ë³€í™”ì‹œí‚¤ëŠ” ê±°ëŒ€í•œ íƒ€ì›Œê°€ ë©ë‹ˆë‹¤.",
        },
      },
      step3: {
        title: "Cheer ê¸°ëŠ¥ ì‚¬ìš©í•˜ê¸° ğŸ’—",
        content: {
          0: "ì„¹ì…˜ì—ì„œ ì‘ì›í•˜ê³  ì‹¶ì€ ì‚¬ëŒì´ë‚˜ ì´ë²¤íŠ¸ë¥¼ ì„ íƒí•˜ì„¸ìš”.",
          1: "ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ìŒì„± ë©”ì‹œì§€ë¥¼ ë…¹ìŒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
        },
      },
      step4: {
        title: "ìŒì„± ë…¹ìŒí•˜ê¸° ğŸ™ï¸",
        content: {
          0: "ë§ˆì´í¬ ê¶Œí•œì„ í—ˆìš©í•˜ë©´ ìŒì„±ì„ ë…¹ìŒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
          1: "ë…¹ìŒí•œ ìŒì„±ì€ WorldStackì— ì¶”ê°€ë˜ë©°,",
          2: "ë‹¤ë¥¸ ì‚¬ëŒë“¤ì—ê²Œ ì‘ì›ì˜ ë©”ì‹œì§€ë¡œ ì „ë‹¬ë©ë‹ˆë‹¤.",
          3: "ğŸ’¡ íŒ: ì§§ê³  ì§„ì‹¬ ì–´ë¦° ë©”ì‹œì§€ê°€ ê°€ì¥ íš¨ê³¼ì ì…ë‹ˆë‹¤!",
        },
      },
      step5: {
        title: "ê¸ì • ì„ íƒ í€´ì¦ˆ âœ¨",
        content: {
          0: "ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ê¸ì •ì ì¸ ì„ íƒì„ ì—°ìŠµí•  ìˆ˜ ìˆëŠ” í€´ì¦ˆê°€ ì‹œì‘ë©ë‹ˆë‹¤.",
          1: "4ì§€ì„ ë‹¤ ë¬¸ì œì—ì„œ ê¸ì •ì ì¸ ë‹µì„ ì„ íƒí•˜ë©´,",
          2: "ìŒì„± ë…¹ìŒ ì—†ì´ ë°”ë¡œ",
          3: "WorldStackì— ì¶”ê°€ë©ë‹ˆë‹¤.",
          4: "ğŸ’¡ ìŒì„± ë…¹ìŒì´ ì–´ë ¤ìš´ ë¶„ë“¤ì„ ìœ„í•œ ëŒ€ì•ˆ ê¸°ëŠ¥ì…ë‹ˆë‹¤!",
        },
      },
      step6: {
        title: "Word Study ëª¨ë“œ ğŸ“š",
        highlight: "ê¸ì • ë‹¨ì–´ ìŠ¤íƒí•˜ê¸°",
        content: {
          0: "ê¸°ëŠ¥ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤! (ì•„ë˜ë¡œ ë“œë˜ê·¸)",
          1: "ë‹¨ì–´ì˜ ìƒ‰ìƒì„ ë°”ê¾¸ë©° ì•”ê¸° ìƒíƒœë¥¼ ê´€ë¦¬í•˜ê³ ,",
          2: "ê¸ì • ë‹¨ì–´ë¥¼ WorldStackì— ë°”ë¡œ ìŒ“ì•„ë³´ì„¸ìš”.",
          3: "ğŸ’¡ ê¸ì •ì ì¸ ë‹¨ì–´ë¶€í„° ì–´íœ˜ë ¥ì„ í‚¤ì›Œë³´ì„¸ìš”!",
        },
      },
      step7: {
        title: "ê¸ì • ë“œë¡œì‰ ëª¨ë“œ ğŸ¨",
        highlight: "ë§ˆìŒì„ ê·¸ë ¤ë³´ì„¸ìš”",
        content: {
          0: "Love, Hope, Peaceì™€ ê°™ì€ ê¸ì • ë‹¨ì–´ë¥¼ ì„ íƒí•˜ê³ ,",
          1: "ë‚˜ë§Œì˜ ê·¸ë¦¼ìœ¼ë¡œ í‘œí˜„í•´ ë³´ì„¸ìš”.",
          2: "ë‹¹ì‹ ì˜ ê·¸ë¦¼ì€ íŠ¹ë³„í•œ ìŠ¤íƒì´ ë˜ì–´",
          3: "WorldStack íƒ€ì›Œë¥¼ ë‹¤ì±„ë¡­ê²Œ ì±„ì›Œì¤ë‹ˆë‹¤.",
        },
      },
      skip: "ê±´ë„ˆë›°ê¸°",
      previous: "ì´ì „",
      next: "ë‹¤ìŒ",
      start: "ì‹œì‘í•˜ê¸°",
      dontShowAgain: "ë‹¤ì‹œ ë³´ì§€ ì•Šê¸°",
    },
    positiveChoice: {
      title: "ê¸ì • ì„ íƒ í€´ì¦ˆ âœ¨",
      close: "ë‹«ê¸°",
      selectPositive: "ê¸ì •ì ì¸ ì„ íƒì§€ë¥¼ ì„ íƒí•˜ì„¸ìš”",
      correct: "ğŸ‰ ì •ë‹µì…ë‹ˆë‹¤!",
      incorrect: "âŒ í‹€ë ¸ìŠµë‹ˆë‹¤",
      correctAnswer: "ì •ë‹µì€",
      adding: "WorldStackì— ì¶”ê°€ ì¤‘...",
      added: "WorldStackì— ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤!",
      retry: "ë‹¤ì‹œ ì‹œë„",
      error: "ì €ì¥ ì˜¤ë¥˜",
      scriptPrefix: "ê¸ì • ì„ íƒ:",
    },
    common: {
      loading: "ë¡œë”© ì¤‘...",
      error: "ì˜¤ë¥˜",
    },
    main: {
      title: "SPACE STACK ì¹˜ì–´ í—ˆë¸Œ",
      searchPlaceholder: "ì´ë²¤íŠ¸ ê²€ìƒ‰",
      whoToCheer: "ì‘ì›í•˜ê¸°",
      cheerNow: "ì‘ì›í•˜ê¸°",
      worldStack: "WorldStack",
      voicesBuilding: "í•¨ê»˜ ìŒ“ì•„ê°€ëŠ” ëª©ì†Œë¦¬ë“¤",
      startBuilding: "íƒ€ì›Œ ìŒ“ê¸°ë¥¼ ì‹œì‘í•´ë³´ì„¸ìš”...",
      myStackLocal: "ë‚˜ì˜ ìŠ¤íƒ (ë¡œì»¬)",
      refresh: "ìƒˆë¡œê³ ì¹¨",
      categories: {
        fandom: "íŒ¬ë¤",
        health: "ê±´ê°•",
        education: "êµìœ¡",
        local: "ì§€ì—­",
        sports: "ìŠ¤í¬ì¸ ",
        nonProfit: "ë¹„ì˜ë¦¬",
        children: "ì–´ë¦°ì´",
        emergingCreators: "ë¼ì´ì§• í¬ë¦¬ì—ì´í„°",
      },
    },
  },
};

// Get language from localStorage or default to English
export function getLanguage() {
  if (typeof window === "undefined") return "en";
  // Default to English for US accelerator submission
  return localStorage.getItem("spacestack_language") || "en";
}

// Set language
export function setLanguage(lang) {
  if (typeof window === "undefined") return;
  localStorage.setItem("spacestack_language", lang);
}

// Get translation
export function t(key, lang = null) {
  const currentLang = lang || getLanguage();
  const keys = key.split(".");
  let value = translations[currentLang] || translations.en;

  // Navigate through nested object
  for (let i = 0; i < keys.length; i++) {
    const k = keys[i];
    if (value && typeof value === "object") {
      // Try string key first
      if (k in value) {
        value = value[k];
      } else {
        // Fallback to English if translation not found
        value = translations.en;
        for (let j = 0; j <= i; j++) {
          const k2 = keys[j];
          if (value && typeof value === "object" && k2 in value) {
            value = value[k2];
          } else {
            console.warn(`[i18n] Translation not found: ${key}`);
            return key; // Return key if translation not found
          }
        }
        break;
      }
    } else {
      // Fallback to English
      value = translations.en;
      for (let j = 0; j <= i; j++) {
        const k2 = keys[j];
        if (value && typeof value === "object" && k2 in value) {
          value = value[k2];
        } else {
          console.warn(`[i18n] Translation not found: ${key}`);
          return key;
        }
      }
      break;
    }
  }

  return typeof value === "string" ? value : key;
}

export default translations;
